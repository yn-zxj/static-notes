import{_ as t,N as p,Z as l,a1 as a,a2 as s,$ as r,a3 as e,E as c}from"./framework-85a1943c.js";const o="/assets/running_status-4eee8135.png",i="/assets/download_page-e6fd377e.png",d="/assets/rpm_package-c83f855b.png",m="/assets/error_install-18fa6956.png",g="/assets/rpm_mysql_lib-0595b56a.png",h="/assets/password_mysql-ff04039e.png",u="/assets/mysqld_status-87ea02e5.png",y="/assets/mysqld_process-ff581f98.png",b={},v=e(`<h2 id="_1-安装前说明" tabindex="-1"><a class="header-anchor" href="#_1-安装前说明" aria-hidden="true">#</a> 1.安装前说明</h2><h3 id="_1-1-linux-系统及工具准备" tabindex="-1"><a class="header-anchor" href="#_1-1-linux-系统及工具准备" aria-hidden="true">#</a> 1.1 Linux 系统及工具准备</h3><p>CentOS6 和 CentOS7 在 MySQL 的使用中的区别：</p><table><thead><tr><th></th><th>CentOS6</th><th>CentOS7</th></tr></thead><tbody><tr><td>防火墙</td><td>iptables</td><td>firewalld</td></tr><tr><td>启动服务</td><td>service</td><td>systemctl</td></tr></tbody></table><h3 id="_1-2-查看是否安装过-mysql" tabindex="-1"><a class="header-anchor" href="#_1-2-查看是否安装过-mysql" aria-hidden="true">#</a> 1.2 查看是否安装过 MySQL</h3><p>MySQL 版本查看：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">--version</span>
</code></pre></div><p>如果你是用 rpm 安装，检查一下 rpm package：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql <span class="token comment"># -i 忽略大小写</span>
</code></pre></div><p>检查 mysql service：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>systemctl status mysqld.service
</code></pre></div><figure><img src="`+o+`" alt="运行状态.png" tabindex="0" loading="lazy"><figcaption>运行状态.png</figcaption></figure><h3 id="_1-3-mysql-的卸载" tabindex="-1"><a class="header-anchor" href="#_1-3-mysql-的卸载" aria-hidden="true">#</a> 1.3 MySQL 的卸载</h3><p>① 关闭 mysql 服务</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>systemctl stop mysqld.service
</code></pre></div><p>② 查看当前 mysql 安装状态</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
<span class="token comment"># 或</span>
yum list installed <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre></div><p>③ 卸载上述命令查询出的已安装程序</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>yum remove mysql-xxx mysql-xxx
</code></pre></div><p>④ 删除 mysql 相关文件</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查找相关文件</span>
<span class="token function">find</span> / <span class="token parameter variable">-name</span> mysql

<span class="token comment"># 删除</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> xxx
</code></pre></div><p>⑤ 删除<code>my.cnf</code></p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/my.cnf
</code></pre></div><h2 id="_2-mysql-的-linux-版的安装" tabindex="-1"><a class="header-anchor" href="#_2-mysql-的-linux-版的安装" aria-hidden="true">#</a> 2.MySQL 的 Linux 版的安装</h2><div class="hint-container tip"><p class="hint-container-title">MySQL 的四大版本</p><p><strong>MySQL Community Server 社区版本</strong>，开源免费，自由下载，但不提供官方技术支持，适用于大多数普通用户。</p><p><strong>MySQL Enterprise Edition 企业版本</strong>，需付费，不能在线下载，可以试用 30 天。提供了更多的功能和更完备的技术支持，更适合于对数据库的功能和可靠性要求较高的企业客户。</p><p><strong>MySQL Cluster 集群版</strong>，开源免费。用于架设集群服务器，可将几个 MySQL Server 封装成一个 Server。需要在社区版或企业版的基础上使用。</p><p><strong>MySQL Cluster CGE 高级集群版</strong>，需付费。</p></div><h3 id="_2-1-下载-mysql-指定版本" tabindex="-1"><a class="header-anchor" href="#_2-1-下载-mysql-指定版本" aria-hidden="true">#</a> 2.1 下载 MySQL 指定版本</h3>`,26),f={href:"https://dev.mysql.com/downloads/",target:"_blank",rel:"noopener noreferrer"},k=e('<p>② 点击<code>MySQL Community Server</code></p><p>③ 在<code>General Availability(GA) Releases</code>中选择适合的版本</p><figure><img src="'+i+'" alt="Dowload Page.png" tabindex="0" loading="lazy"><figcaption>Dowload Page.png</figcaption></figure><h3 id="_2-2-linux-系统下安装-mysql-的几种方式" tabindex="-1"><a class="header-anchor" href="#_2-2-linux-系统下安装-mysql-的几种方式" aria-hidden="true">#</a> 2.2 Linux 系统下安装 MySQL 的几种方式</h3><h4 id="rpm-命令" tabindex="-1"><a class="header-anchor" href="#rpm-命令" aria-hidden="true">#</a> rpm 命令</h4><p>使用 rpm 命令安装扩展名为<code>.rpm</code>的软件包，其包的格式一般如下：</p><figure><img src="'+d+`" alt="RPM包格式.png" tabindex="0" loading="lazy"><figcaption>RPM包格式.png</figcaption></figure><hr><h4 id="yum-命令" tabindex="-1"><a class="header-anchor" href="#yum-命令" aria-hidden="true">#</a> yum 命令</h4><p>需联网，从 互联网获取 的 yum 源，直接使用 yum 命令安装</p><hr><h4 id="编译安装源码包" tabindex="-1"><a class="header-anchor" href="#编译安装源码包" aria-hidden="true">#</a> 编译安装源码包</h4><p>针对<code>tar.gz</code>这样的压缩格式，要用<code>tar</code>命令来解压；如果是其它压缩格式，就使用其它命令</p><h3 id="_2-3-centos7-下检查-mysql-依赖" tabindex="-1"><a class="header-anchor" href="#_2-3-centos7-下检查-mysql-依赖" aria-hidden="true">#</a> 2.3 CentOS7 下检查 MySQL 依赖</h3><p>① 检查<code>/tmp</code>临时目录权限(必不可少)</p><p>由于安装过程中，会通过 mysql 用户在/tmp 目录下新建 tmp_db 文件，所以需要给它设置较大的权限，执行：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> /tmp
</code></pre></div><p>② 安装前检查依赖，不存在则需要安装</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> libaio
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> net-tools
</code></pre></div><h3 id="_2-4-安装过程" tabindex="-1"><a class="header-anchor" href="#_2-4-安装过程" aria-hidden="true">#</a> 2.4 安装过程</h3><p>① 将安装程序拷贝到<code>/opt</code>目录下</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 以抽离出来的mysql8为例，使用rpm安装</span>
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-common-8.0.25-1.el7.x86_64.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-plugins-8.0.25-1.el7.x86_64.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-libs-8.0.25-1.el7.x86_64.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-8.0.25-1.el7.x86_64.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-server-8.0.25-1.el7.x86_64.rpm
</code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>① 必须按照上面顺序执行<br> ② 如果没有检查 mysql 依赖环境，在安装 mysql-community-server 会报错<br> ③ 命令说明</p><blockquote><p>rpm：Redhat Package Manage，通过 RPM 的管理，用户可以把源代码包装成以 rpm 为扩展名的文件形式，易于安装<br> -i：--install，安装软件包<br> -v：--verbose，提供更多的详细信息输出<br> -h：--hash，软件包安装的时候列出哈希标记，展示进度条</p></blockquote><p>④ 可能遇到的报错，使用<code>yum remove mysql-libs</code>，清除之前安装过的依赖即可</p><figure><img src="`+m+`" alt="报错.png" tabindex="0" loading="lazy"><figcaption>报错.png</figcaption></figure></div><p>② 查看 MySQL 版本</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看版本</span>
mysql <span class="token parameter variable">--version</span>

<span class="token comment"># 查看是否安装成功</span>
<span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
</code></pre></div><figure><img src="`+g+`" alt="安装验证.png" width="500" tabindex="0" loading="lazy"><figcaption>安装验证.png</figcaption></figure><p>③ 服务的初始化</p><p>为了保证数据库目录与文件的所有者为 mysql 登录用户，如果你是以 root 身份运行 mysql 服务，需要执 行下面的命令初始化：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>mysqld <span class="token parameter variable">--initialize</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql
</code></pre></div><blockquote><p>说明： <code>--initialize</code> 选项默认以&quot;安全&quot;模式来初始化，则会为 root 用户生成一个密码并将 该密码标记为过期，登录后你需要设置一个新的密码。生成的 临时密码 会往日志中记录一份</p></blockquote><p>查看密码：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># root@localhost: 后面就是初始化的密码</span>
<span class="token function">cat</span> /var/log/mysqld.log
</code></pre></div><figure><img src="`+h+`" alt="查看密码.png" tabindex="0" loading="lazy"><figcaption>查看密码.png</figcaption></figure><p>④ 启动 MySQL，查看状态</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># .service后缀可以省略</span>
<span class="token comment"># 启动</span>
systemctl start mysqld.service
<span class="token comment"># 关闭</span>
systemctl stop mysqld.service
<span class="token comment"># 重启</span>
systemctl restart mysqld.service
<span class="token comment"># 查看状态</span>
systemctl status mysqld.service
</code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>mysqld 这个可执行文件就代表着 MySQL 服务器程序，运行这个可执行文件就可以直接启动一个服务器进程</p><figure><img src="`+u+'" alt="启动状态.png" tabindex="0" loading="lazy"><figcaption>启动状态.png</figcaption></figure><p>查看进程：<code>ps -ef | grep mysqld</code></p><figure><img src="'+y+`" alt="查看进程.png" tabindex="0" loading="lazy"><figcaption>查看进程.png</figcaption></figure></div><p>⑤ 查看服务是否自启动</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>systemctl list-unit-files<span class="token operator">|</span><span class="token function">grep</span> mysqld.service
</code></pre></div><blockquote><p>默认是 enable，如果不是可以运行下面命令进行设置：</p></blockquote><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 开启自启动</span>
systemctl <span class="token builtin class-name">enable</span> mysqld.service
<span class="token comment"># 关闭自启动</span>
systemctl disable mysqld.service
</code></pre></div><h2 id="_3-mysql-登录" tabindex="-1"><a class="header-anchor" href="#_3-mysql-登录" aria-hidden="true">#</a> 3.MySQL 登录</h2>`,41);function _(q,x){const n=c("ExternalLinkIcon");return p(),l("div",null,[v,a("p",null,[s("① 下载地址："),a("a",f,[s("https://dev.mysql.com/downloads/"),r(n)])]),k])}const L=t(b,[["render",_],["__file","install_and_uninstall.html.vue"]]);export{L as default};
